# 查询可退役授权列表<a name="dew_02_0032"></a>

## 功能介绍<a name="s1731a14fb0144c79bf0fa90c694f34f7"></a>

查询用户可以退役的授权列表。

## URI<a name="se70c3e5518a04f60b06032524dddfef4"></a>

-   URI格式

    POST /v1.0/\{project\_id\}/kms/list-retirable-grants

-   参数说明

    **表 1**  参数说明

    <a name="t982da1e0196d4ec1a28d1fbff2cc8191"></a>
    <table><thead align="left"><tr id="r6e963322c1e740d181726d2f0e91df5a"><th class="cellrowborder" valign="top" width="17%" id="mcps1.2.5.1.1"><p id="a3b5bbe5a7f644fd3a74cecbfb3f7ed60"><a name="a3b5bbe5a7f644fd3a74cecbfb3f7ed60"></a><a name="a3b5bbe5a7f644fd3a74cecbfb3f7ed60"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="16%" id="mcps1.2.5.1.2"><p id="ad98d2f62bd064b4e96ea922645197c24"><a name="ad98d2f62bd064b4e96ea922645197c24"></a><a name="ad98d2f62bd064b4e96ea922645197c24"></a>是否必选</p>
    </th>
    <th class="cellrowborder" valign="top" width="17%" id="mcps1.2.5.1.3"><p id="a3becf0b3aec9468984c2efc8d5abbea5"><a name="a3becf0b3aec9468984c2efc8d5abbea5"></a><a name="a3becf0b3aec9468984c2efc8d5abbea5"></a>参数类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="50%" id="mcps1.2.5.1.4"><p id="a6bb6f1fe56a2454982832e8d56d354d8"><a name="a6bb6f1fe56a2454982832e8d56d354d8"></a><a name="a6bb6f1fe56a2454982832e8d56d354d8"></a>描述</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="r69bf37b65d3f446eab7b3f4d1b2fcec0"><td class="cellrowborder" valign="top" width="17%" headers="mcps1.2.5.1.1 "><p id="ae42d73592f58424ea93a11e52d2478dd"><a name="ae42d73592f58424ea93a11e52d2478dd"></a><a name="ae42d73592f58424ea93a11e52d2478dd"></a>project_id</p>
    </td>
    <td class="cellrowborder" valign="top" width="16%" headers="mcps1.2.5.1.2 "><p id="a56440c0f0ae34ba3b8033d1247673984"><a name="a56440c0f0ae34ba3b8033d1247673984"></a><a name="a56440c0f0ae34ba3b8033d1247673984"></a>是</p>
    </td>
    <td class="cellrowborder" valign="top" width="17%" headers="mcps1.2.5.1.3 "><p id="p4386100291125"><a name="p4386100291125"></a><a name="p4386100291125"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="a1314869d2dc147b38461e037d622f7b4"><a name="a1314869d2dc147b38461e037d622f7b4"></a><a name="a1314869d2dc147b38461e037d622f7b4"></a>项目ID。</p>
    </td>
    </tr>
    </tbody>
    </table>


## 请求消息<a name="seb7b7901701247fab30a59b76f1c7f93"></a>

**表 2**  请求参数

<a name="table46221022101230"></a>
<table><thead align="left"><tr id="row9315574101230"><th class="cellrowborder" valign="top" width="17%" id="mcps1.2.5.1.1"><p id="p16364058101230"><a name="p16364058101230"></a><a name="p16364058101230"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="16%" id="mcps1.2.5.1.2"><p id="p57514295101230"><a name="p57514295101230"></a><a name="p57514295101230"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="17%" id="mcps1.2.5.1.3"><p id="p50420322101230"><a name="p50420322101230"></a><a name="p50420322101230"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.5.1.4"><p id="p28146304101230"><a name="p28146304101230"></a><a name="p28146304101230"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row2638193101722"><td class="cellrowborder" valign="top" width="17%" headers="mcps1.2.5.1.1 "><p id="p5119285016439"><a name="p5119285016439"></a><a name="p5119285016439"></a>limit</p>
</td>
<td class="cellrowborder" valign="top" width="16%" headers="mcps1.2.5.1.2 "><p id="p6353760916439"><a name="p6353760916439"></a><a name="p6353760916439"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="17%" headers="mcps1.2.5.1.3 "><p id="p0691401259"><a name="p0691401259"></a><a name="p0691401259"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p187030631183"><a name="p187030631183"></a><a name="p187030631183"></a>指定查询可退役授权返回记录条数，如果查询记录条数小于存在的条数，响应参数<span class="parmname" id="parmname270646661183"><a name="parmname270646661183"></a><a name="parmname270646661183"></a>“truncated”</span>将返回<span class="parmvalue" id="parmvalue324607791183"><a name="parmvalue324607791183"></a><a name="parmvalue324607791183"></a>“true”</span>，表示存在分页。</p>
<p id="p4627274216439"><a name="p4627274216439"></a><a name="p4627274216439"></a>取值在授权最大个数范围以内。例如：100</p>
</td>
</tr>
<tr id="row35142504101726"><td class="cellrowborder" valign="top" width="17%" headers="mcps1.2.5.1.1 "><p id="p2967402816439"><a name="p2967402816439"></a><a name="p2967402816439"></a>marker</p>
</td>
<td class="cellrowborder" valign="top" width="16%" headers="mcps1.2.5.1.2 "><p id="p848971516439"><a name="p848971516439"></a><a name="p848971516439"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="17%" headers="mcps1.2.5.1.3 "><p id="p1110110421756"><a name="p1110110421756"></a><a name="p1110110421756"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p1313368711816"><a name="p1313368711816"></a><a name="p1313368711816"></a>分页查询起始位置标识。</p>
<p id="p1657829916439"><a name="p1657829916439"></a><a name="p1657829916439"></a>分页查询收到的响应参数<span class="parmname" id="parmname6329291118537"><a name="parmname6329291118537"></a><a name="parmname6329291118537"></a>“truncated”</span>为<span class="parmvalue" id="parmvalue1710850818541"><a name="parmvalue1710850818541"></a><a name="parmvalue1710850818541"></a>“true”</span>时，可以发送连续的请求获取更多的记录条数，<span class="parmname" id="parmname2836570018548"><a name="parmname2836570018548"></a><a name="parmname2836570018548"></a>“marker”</span>设置为响应的<span class="parmvalue" id="parmvalue4673246418555"><a name="parmvalue4673246418555"></a><a name="parmvalue4673246418555"></a>“next_marker”</span>的值。例如：10。</p>
</td>
</tr>
<tr id="row59920057164255"><td class="cellrowborder" valign="top" width="17%" headers="mcps1.2.5.1.1 "><p id="p5386140416439"><a name="p5386140416439"></a><a name="p5386140416439"></a>sequence</p>
</td>
<td class="cellrowborder" valign="top" width="16%" headers="mcps1.2.5.1.2 "><p id="p5650607916439"><a name="p5650607916439"></a><a name="p5650607916439"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="17%" headers="mcps1.2.5.1.3 "><p id="p213117445516"><a name="p213117445516"></a><a name="p213117445516"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p1358971416439"><a name="p1358971416439"></a><a name="p1358971416439"></a>请求消息序列号，36字节序列号。</p>
<p id="p5519856416439"><a name="p5519856416439"></a><a name="p5519856416439"></a>例如：919c82d4-8046-4722-9094-35c3c6524cff</p>
</td>
</tr>
</tbody>
</table>

## 响应消息<a name="sfadd53a5f4714e8f87811818d62d0296"></a>

**表 3**  响应参数

<a name="t98d238e10953421e84a073707024c329"></a>
<table><thead align="left"><tr id="r144a2c52c5054c6d9243eb2ef3875a21"><th class="cellrowborder" valign="top" width="17%" id="mcps1.2.5.1.1"><p id="p13230838154934"><a name="p13230838154934"></a><a name="p13230838154934"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="16%" id="mcps1.2.5.1.2"><p id="p65064970154934"><a name="p65064970154934"></a><a name="p65064970154934"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="17%" id="mcps1.2.5.1.3"><p id="p35771181154934"><a name="p35771181154934"></a><a name="p35771181154934"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.5.1.4"><p id="p11784586154934"><a name="p11784586154934"></a><a name="p11784586154934"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="r3c4af7b36e9240d197ab56255e37b83c"><td class="cellrowborder" valign="top" width="17%" headers="mcps1.2.5.1.1 "><p id="p54751797164430"><a name="p54751797164430"></a><a name="p54751797164430"></a>grants</p>
</td>
<td class="cellrowborder" valign="top" width="16%" headers="mcps1.2.5.1.2 "><p id="p63244409104212"><a name="p63244409104212"></a><a name="p63244409104212"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="17%" headers="mcps1.2.5.1.3 "><p id="p18681346567"><a name="p18681346567"></a><a name="p18681346567"></a>Array of objects</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p22523510104212"><a name="p22523510104212"></a><a name="p22523510104212"></a>grant列表，详情请参见<a href="查询授权列表.md#table17099798154440">表4</a>。</p>
</td>
</tr>
<tr id="row1195616116587"><td class="cellrowborder" valign="top" width="17%" headers="mcps1.2.5.1.1 "><p id="p5734209165853"><a name="p5734209165853"></a><a name="p5734209165853"></a>next_marker</p>
</td>
<td class="cellrowborder" valign="top" width="16%" headers="mcps1.2.5.1.2 "><p id="p41184394165853"><a name="p41184394165853"></a><a name="p41184394165853"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="17%" headers="mcps1.2.5.1.3 "><p id="p750913471517"><a name="p750913471517"></a><a name="p750913471517"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p40375092113058"><a name="p40375092113058"></a><a name="p40375092113058"></a>获取下一页所需要传递的marker值。</p>
<p id="p47601640165853"><a name="p47601640165853"></a><a name="p47601640165853"></a>当<span class="parmname" id="parmname5055090211312"><a name="parmname5055090211312"></a><a name="parmname5055090211312"></a>“truncated”</span>为<span class="parmvalue" id="parmvalue131990311317"><a name="parmvalue131990311317"></a><a name="parmvalue131990311317"></a>“false”</span>时，<span class="parmname" id="parmname37596411113113"><a name="parmname37596411113113"></a><a name="parmname37596411113113"></a>“next_marker”</span>为空。</p>
</td>
</tr>
<tr id="row63650114165815"><td class="cellrowborder" valign="top" width="17%" headers="mcps1.2.5.1.1 "><p id="p6312998165853"><a name="p6312998165853"></a><a name="p6312998165853"></a>truncated</p>
</td>
<td class="cellrowborder" valign="top" width="16%" headers="mcps1.2.5.1.2 "><p id="p13415518165853"><a name="p13415518165853"></a><a name="p13415518165853"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="17%" headers="mcps1.2.5.1.3 "><p id="p26461450057"><a name="p26461450057"></a><a name="p26461450057"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><div class="p" id="p12915177165853"><a name="p12915177165853"></a><a name="p12915177165853"></a>是否还有下一页：<a name="ul49127730165853"></a><a name="ul49127730165853"></a><ul id="ul49127730165853"><li><span class="parmname" id="parmname50168037113047"><a name="parmname50168037113047"></a><a name="parmname50168037113047"></a>“true”</span>表示还有数据。</li><li><span class="parmvalue" id="parmvalue30958336113051"><a name="parmvalue30958336113051"></a><a name="parmvalue30958336113051"></a>“false”</span>表示已经是最后一页。</li></ul>
</div>
</td>
</tr>
<tr id="row41123860163925"><td class="cellrowborder" valign="top" width="17%" headers="mcps1.2.5.1.1 "><p id="p37562908163928"><a name="p37562908163928"></a><a name="p37562908163928"></a>total</p>
</td>
<td class="cellrowborder" valign="top" width="16%" headers="mcps1.2.5.1.2 "><p id="p26496943163928"><a name="p26496943163928"></a><a name="p26496943163928"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="17%" headers="mcps1.2.5.1.3 "><p id="p22696744163928"><a name="p22696744163928"></a><a name="p22696744163928"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.5.1.4 "><p id="p65877659163928"><a name="p65877659163928"></a><a name="p65877659163928"></a>grant总条数。</p>
</td>
</tr>
</tbody>
</table>

## 示例<a name="section122445141020"></a>

如下以查询可退役授权列表为例。

-   请求样例

    ```
    {
        "limit": "",
        "marker": ""
    }
    ```

-   响应样例

    ```
    {
        "grants": [
         {"key_id": "bb6a3d22-dc93-47ac-b5bd-88df7ad35f1e",
          "grant_id": "7c9a3286af4fcca5f0a385ad13e1d21a50e27b6dbcab50f37f30f93b8939827d",
          "operations": 
          ["describe-key","create-datakey", "encrypt-datakey"],
          "grantee_principal":"13gg44z4g2sglzk0egw0u726zoyzvrs8",
          "retiring_principal":"13gg44z4g2sglzk0egw0u726zoyzvrs8",
          "issuing_principal":"e4hkeeea506ex3wgnzyhi656n8hx8xa3",
          "name":"my_grant",
          "creation_date":"1497341531000"
          }],
        "next_marker": "",
        "truncated": "false",
        "total":1
    }
    ```

    或

    ```
    {
        "error": {
            "error_code": "KMS.XXXX",
            "error_msg": "XXX"
        }
    }
    ```


## 状态码<a name="section3454223421"></a>

[表4](#dew_02_0012_zh-cn_topic_0079615001_table20596071)描述的是API返回的正常状态码。

**表 4**  状态码

<a name="dew_02_0012_zh-cn_topic_0079615001_table20596071"></a>
<table><thead align="left"><tr id="dew_02_0012_zh-cn_topic_0079615001_row9746163"><th class="cellrowborder" valign="top" width="16.16%" id="mcps1.2.4.1.1"><p id="dew_02_0012_p57545694203043"><a name="dew_02_0012_p57545694203043"></a><a name="dew_02_0012_p57545694203043"></a>状态码</p>
</th>
<th class="cellrowborder" valign="top" width="28.28%" id="mcps1.2.4.1.2"><p id="dew_02_0012_p4531342288"><a name="dew_02_0012_p4531342288"></a><a name="dew_02_0012_p4531342288"></a>编码</p>
</th>
<th class="cellrowborder" valign="top" width="55.559999999999995%" id="mcps1.2.4.1.3"><p id="dew_02_0012_p30689603203043"><a name="dew_02_0012_p30689603203043"></a><a name="dew_02_0012_p30689603203043"></a>状态说明</p>
</th>
</tr>
</thead>
<tbody><tr id="dew_02_0012_zh-cn_topic_0079615001_row48621261"><td class="cellrowborder" valign="top" width="16.16%" headers="mcps1.2.4.1.1 "><p id="dew_02_0012_zh-cn_topic_0079615001_p46008046"><a name="dew_02_0012_zh-cn_topic_0079615001_p46008046"></a><a name="dew_02_0012_zh-cn_topic_0079615001_p46008046"></a>200</p>
</td>
<td class="cellrowborder" valign="top" width="28.28%" headers="mcps1.2.4.1.2 "><p id="dew_02_0012_p7538425819"><a name="dew_02_0012_p7538425819"></a><a name="dew_02_0012_p7538425819"></a>OK</p>
</td>
<td class="cellrowborder" valign="top" width="55.559999999999995%" headers="mcps1.2.4.1.3 "><p id="dew_02_0012_p1885682315512"><a name="dew_02_0012_p1885682315512"></a><a name="dew_02_0012_p1885682315512"></a>请求已成功。</p>
</td>
</tr>
</tbody>
</table>

异常状态码，请参见[状态码](状态码.md)。

