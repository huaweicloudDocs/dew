# 关闭弹性云服务器的密码登录方式后，如何重新开启？<a name="dew_01_0072"></a>

当用户将密钥对绑定到弹性云服务器时，将密码登录方式关闭，若仍然需要使用密码登录弹性云服务器，可重新开启密码登录方式。

如下以PuTTY方式登录弹性云服务器开启密码登录方式为例进行说明。

1.  <a name="l589950e2b89c441c8cf1be301cf04941"></a>判断私钥文件是否为“.ppk“格式。
    -   若是“.ppk“格式文件，请跳过此步骤。
    -   若不是“.ppk“格式，请按以下步骤将私钥文件格式转换为“.ppk“格式。
        1.  在以下路径中下载PuTTY和PuTTYgen。

            http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html

            >![](public_sys-resources/icon-note.gif) **说明：**   
            >PuTTYgen是密钥生成器，用于创建SSH密钥对，生成一个公钥和私钥供PuTTY使用。  

        2.  运行PuTTYgen。
        3.  在“Actions“区域，单击“Load“，并导入购买弹性云服务器时保存的私钥文件。

            导入时注意确保导入的格式要求为“All files\(\*.\*\)“。

        4.  单击“Save private key“。
        5.  保存转化后的私钥到本地。例如：kp-123.ppk。



1.  双击“PuTTY.EXE“，打开“PuTTY Configuration“。
2.  选择“Connection \> data“，在“Auto-login username“处输入镜像的用户名。

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >-   若是“CoreOS“的公共镜像，镜像的用户名为“core“。  
    >-   若是“非CoreOS“的公共镜像，镜像的用户名为“root“。  

3.  选择“Connection \> SSH \> Auth“，在“Private key file forauthentication“配置项中，单击“Browse“，选择[1](#l589950e2b89c441c8cf1be301cf04941)转化的私钥文件。
4.  单击“Session“，在“Host Name \(or IP address\)“下的输入框中输入弹性云服务器的弹性IP地址。

    **图 1**  配置弹性IP<a name="dew_01_0085_f0a6177ed56ce47c9861e00feb09e807b"></a>  
    ![](figures/配置弹性IP.png "配置弹性IP")

5.  单击“Open“，登录弹性云服务器。

1.  执行以下命令，打开“/etc/ssh/sshd\_config“文件。

    **vi /etc/ssh/sshd\_config**

2.  按“i“进入编辑模式，开启密码方式登录。

    -   非SUSE操作系统，将“PasswordAuthentication“字段值修改为“yes“。

        ```
        PasswordAuthentication yes
        ```

    -   SUSE操作系统，将“PasswordAuthentication“和“UsePAM”字段值修改为“yes“。

        ```
        PasswordAuthentication yes
        UsePAM yes
        ```


    >![](public_sys-resources/icon-note.gif) **说明：**   
    >-   SUSE操作系统  
    >    关闭密码登录需要将“PasswordAuthentication“和“UsePAM“字段值均修改为“no“。若文件中没有“PasswordAuthentication“和“UsePAM“参数，新增该参数并配置为“no“。  
    >-   非SUSE操作系统  
    >    关闭密码方式登录需要将“PasswordAuthentication“字段值修改为“no“。若**“/etc/ssh/sshd\_config“**文件中没有“PasswordAuthentication“参数，新增该参数并配置为“no“。  

3.  按“Esc“，退出编辑模式。
4.  输入“:wq“，按“Enter“，保存退出。
5.  执行以下命令，重启ssh服务，使配置生效。

    **service sshd restart**

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >Ubuntu14.xx版本的操作系统重启ssh服务，使用以下命令使配置生效。  
    >**service ssh restart**  


