# 华为云服务如何使用KMS加密数据？<a name="dew_01_0053"></a>

使用KMS提供的信封加密方式来保护用户的数据。

华为云服务（包含OBS、IMS、EVS、SFS和RDS）使用KMS提供的信封加密方式来保护用户的数据。

>![](public_sys-resources/icon-note.gif) **说明：**   
>信封加密方式，是一种加密手段，将加密数据的数据密钥封入信封中存储、传递和使用，不再使用用户主密钥直接加解密数据。  

-   用户通过华为云服务加密数据时，需要指定一个KMS用户主密钥。华为云服务会生成一个明文的数据加密密钥和一个密文的数据加密密钥，其中密文的数据加密密钥是由指定的用户主密钥加密明文的数据加密密钥生成的。华为云服务使用明文的数据加密密钥来加密数据，然后将加密后的密文数据与密文的数据加密密钥一同存储在华为云服务中，如下图所示。

    **图 1**  加密本地文件<a name="fig183548412616"></a>  
    ![](figures/加密本地文件.png "加密本地文件")


-   用户通过华为云服务下载数据时，华为云服务通过KMS指定的用户主密钥对密文的数据加密密钥进行解密，并使用解密得到的明文的数据加密密钥来解密密文数据，然后将解密后的明文数据提供给用户下载。

